<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="qna">

<select id="qnaList" resultType="qna">
 SELECT
   Q.QUE_NO as queNo,
   Q.QUE_TITLE as queTitle,
   Q.QUE_TIME as queTime,
   Q.QUE_CONTENTS as queContents,
   Q.QUE_MEMBER_NO as queMemberNo,
   A.ANS_NO as ansNo,
   A.ANS_TIME as ansTime,
   A.ANS_CONTENTS as ansContents,
   Q.QUE_RESPONSE_YN as queResponseYn,
   M.MEMBER_NAME as memberName 
   FROM QUESTION Q LEFT JOIN ANSWER A ON (A.ANS_QUE_NO =  Q.QUE_NO) AND( Q.QUE_MEMBER_NO = A.ANS_MEMBER_NO) 
   LEFT JOIN MEMBER M ON Q.QUE_MEMBER_NO = M.MEMBER_NO where member_no = #{memberNo} 
   ORDER BY QUE_TIME DESC
</select>

</mapper>
